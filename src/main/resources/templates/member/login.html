<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Login</title>
    <link href="/static/kendo/css/common.css" rel="stylesheet"/>
    <script src="/static/js/jquery-3.7.1.min.js"></script>
    <script src="/static/kendo/js/kendo.all.min.js"></script>
    <!--  한글화 -->
    <script src="/static/kendo/js/cultures/kendo.culture.ko-KR.min.js"></script>
    <script src="/static/kendo/js/messages/kendo.messages.ko-KR.min.js"></script>
    <style>
        #login-container {
            width: 400px;
            margin: 0 auto;
            padding: 20px
        }

        #title {
            width: 400px;
            margin: 0 auto;
            padding-top: 200px;
        }

        #buttons {
            display: flex;
            margin-top: 20px;
        }

        button {
            margin-right: 20px;
        }


    </style>
</head>
<body>
<div id="title">
    <h1>게시판 로그인</h1>
</div>
<div id="login-container">
    <input type="text" id="memberid" />
    <input type="password" id="memberPassword" />

    <div id="buttons">
        <button type="submit" id="loginBtn"> 로그인</button>
        <button type="button" id="cancelBtn"> 취소</button>
        <button type="button" id="signupBtn"> 회원가입</button>
    </div>

</div>

<script>
    $(function () {

        let errorMessage = "[[${errorMessage}]]";

        if (errorMessage) {
            alert(errorMessage); // 오류 메시지를 alert로 표시
        }
        $("#memberid").kendoTextBox({
            size: "large",
            label: "ID",
            placeholder: "ID를 입력해주세요"

        });
        $("#memberPassword").kendoTextBox({
            size: "large",
            label: "Password",
            placeholder: "비밀번호를 입력해주세요"
        });


        let dataSource = new kendo.data.DataSource({
            transport: {
                read: {
                    url: "/api/member/login",
                    type: "POST",
                    dataType: "json",
                    data: function(data) {
                        return data;
                    }
                }
            },
            requestEnd: function (e) {debugger;
                if (e.type === "read") {
                    console.log("Response data: ", e.response);  // 서버 응답 데이터 출력
                }
            }
        });

        $("#loginBtn").kendoButton({
            size: "large",
            themeColor: "primary",
            rounded: "large",
            fillMode: "solid"
        }).click(function (e) {debugger;
            e.preventDefault();
            let memberId = $("#memberid").val();
            let memberPassword = $("#memberPassword").val();

            dataSource.read({
                memberId: memberId,
                memberPassword: memberPassword
            })
        });


        $("#cancelBtn").kendoButton({
            size: "large",
            themeColor: "base",
            rounded: "large",
            fillMode: "solid"
        }).click(function () {
            if (confirm("취소하시면 지금까지 작성하신 모든 내용을 잃게 됩니다. 정말 취소하시겠습니까?")) {
                window.location.href = "/";
            }
        });
        $("#signupBtn").kendoButton({
            size: "large",
            themeColor: "base",
            rounded: "large",
            fillMode: "flat"
        }).click(function () {
            window.location.href = "/signup";

        });


    })
</script>
</body>
</html>